# 🔴 404 에러 진단 - 단계별 가이드

## 📋 현재 상황
- ✅ GitHub Settings → Pages: Source가 "GitHub Actions"로 설정됨
- ✅ GitHub Actions 워크플로우 실행됨
- ✅ gh-pages 브랜치 생성됨
- ❌ 하지만 여전히 404 에러 발생

---

## 🔍 단계별 진단 방법

### ✅ 1단계: gh-pages 브랜치 실제 내용 확인 (가장 중요!)

#### 1.1 gh-pages 브랜치 접속
- URL: `https://github.com/jumoooo/front_7th_chapter3-2/tree/gh-pages`

#### 1.2 파일 목록 확인
다음 파일들이 **반드시** 있어야 합니다:

**필수 파일들:**
- ✅ `index.html` (루트에 있어야 함)
- ✅ `assets/` 폴더
- ✅ `assets/index-*.js` 파일

#### 1.3 index.html 파일 확인
1. `index.html` 파일을 클릭해서 내용 확인
2. 다음 내용이 포함되어 있어야 함:
   ```html
   <script type="module" crossorigin src="/front_7th_chapter3-2/assets/index-*.js"></script>
   ```
3. 파일이 비어있거나 내용이 이상한지 확인

#### 1.4 assets 폴더 확인
1. `assets` 폴더 클릭
2. JavaScript 파일이 있는지 확인
3. 파일 이름이 올바른지 확인

---

### ✅ 2단계: GitHub Actions 워크플로우 로그 확인

#### 2.1 워크플로우 실행 기록 확인
- URL: `https://github.com/jumoooo/front_7th_chapter3-2/actions`
- 가장 최근 "Deploy to GitHub Pages" 워크플로우 클릭

#### 2.2 각 단계 확인
다음 단계들이 모두 성공했는지 확인:

1. **Checkout repository** ✅
2. **Setup pnpm** ✅
3. **Setup Node.js** ✅
4. **Install dependencies** ✅
5. **Build advanced package** ✅
   - 이 단계의 로그를 열어서 확인
   - 빌드가 실제로 성공했는지 확인
   - `dist/index.html` 파일이 생성되었다는 메시지가 있는지 확인

6. **Deploy to GitHub Pages** ✅
   - 이 단계의 로그를 열어서 확인
   - 배포가 실제로 성공했는지 확인
   - 에러 메시지가 있는지 확인

#### 2.3 에러 로그 확인
- 빨간색으로 표시된 단계가 있다면 클릭
- 에러 메시지 전체 확인
- 특히 파일 경로 관련 에러가 있는지 확인

---

### ✅ 3단계: 빌드 결과물 검증

#### 3.1 로컬 빌드 테스트
로컬에서 빌드를 실행하여 결과 확인:

```bash
pnpm build:advanced
```

#### 3.2 빌드 결과 확인
```bash
ls -la dist/
```

**확인 사항:**
- ✅ `dist/index.html` 파일이 있어야 함
- ✅ `dist/assets/` 폴더가 있어야 함
- ✅ `dist/assets/index-*.js` 파일이 있어야 함

#### 3.3 index.html 내용 확인
```bash
cat dist/index.html
```

**확인 사항:**
- ✅ JavaScript 파일 경로가 `/front_7th_chapter3-2/assets/...`로 시작해야 함
- ✅ base path가 올바르게 적용되어 있어야 함

---

### ✅ 4단계: 실제 gh-pages 브랜치와 로컬 빌드 비교

#### 4.1 로컬 빌드 결과
```bash
ls -la dist/
```

#### 4.2 gh-pages 브랜치 내용
- GitHub에서 gh-pages 브랜치 파일 목록 확인
- 두 개가 일치하는지 비교

**비교 항목:**
- 파일 개수
- 파일 이름
- 폴더 구조

---

## 🔧 가능한 문제와 해결책

### 문제 1: gh-pages 브랜치에 index.html이 없음

**증상**: `https://github.com/jumoooo/front_7th_chapter3-2/tree/gh-pages`에 index.html이 없음

**원인**: 
- GitHub Actions 워크플로우가 실패했거나
- 배포 단계에서 에러 발생

**해결책**:
1. GitHub Actions 로그 확인
2. 에러 수정 후 재배포
3. 빈 커밋으로 워크플로우 재실행:
   ```bash
   git commit --allow-empty -m "retry deployment"
   git push
   ```

---

### 문제 2: gh-pages 브랜치에 파일은 있지만 경로가 잘못됨

**증상**: index.html이 하위 폴더에 있거나, 경로가 잘못됨

**원인**: 
- `publish_dir` 설정이 잘못되었거나
- 빌드 결과물의 위치가 잘못됨

**해결책**:
- `.github/workflows/deploy.yml`의 `publish_dir: ./dist` 확인
- 빌드 후 `dist` 폴더가 올바른 위치에 생성되는지 확인

---

### 문제 3: 빌드가 성공했지만 파일이 배포되지 않음

**증상**: 
- GitHub Actions에서 빌드는 성공
- 하지만 gh-pages 브랜치에 파일이 없음

**원인**: 
- Deploy 단계에서 권한 문제
- GitHub Actions 권한 설정 문제

**해결책**:
1. Settings → Actions → General 확인
2. "Read and write permissions" 선택 확인
3. 워크플로우 재실행

---

### 문제 4: index.html은 있지만 JavaScript 파일이 로드되지 않음

**증상**: 
- index.html은 보이지만 빈 화면
- 콘솔에서 JavaScript 파일 로드 실패

**원인**: 
- Base path 설정 문제
- 파일 경로가 올바르지 않음

**해결책**:
- `vite.config.ts`의 base path 확인
- 빌드된 index.html의 경로 확인

---

## 🎯 즉시 확인해야 할 사항

### 1. gh-pages 브랜치 실제 파일 확인
```
https://github.com/jumoooo/front_7th_chapter3-2/tree/gh-pages
```

**확인 사항:**
- [ ] index.html 파일이 루트에 있는가?
- [ ] assets 폴더가 있는가?
- [ ] JavaScript 파일이 있는가?
- [ ] 파일 내용이 올바른가?

### 2. GitHub Actions 최근 실행 로그 확인
```
https://github.com/jumoooo/front_7th_chapter3-2/actions
```

**확인 사항:**
- [ ] 모든 단계가 성공했는가? (✅ 초록색)
- [ ] 빌드 단계에서 에러가 없는가?
- [ ] 배포 단계에서 에러가 없는가?
- [ ] 로그에 "Deploying..." 또는 "Deployed successfully" 메시지가 있는가?

### 3. 로컬 빌드와 비교
로컬에서 빌드한 결과와 gh-pages 브랜치의 내용을 비교

---

## 💡 디버깅 팁

### 팁 1: GitHub Actions 로그에서 파일 목록 확인
워크플로우 로그의 "Deploy to GitHub Pages" 단계에서:
- 실제로 어떤 파일들이 배포되었는지 확인
- 파일 경로가 올바른지 확인

### 팁 2: gh-pages 브랜치 직접 확인
- 브랜치를 체크아웃해서 로컬에서 확인:
  ```bash
  git fetch origin gh-pages:gh-pages
  git checkout gh-pages
  ls -la
  ```

### 팁 3: 브라우저 개발자 도구 확인
- F12 → Network 탭
- 어떤 파일이 로드되지 않는지 확인
- 404 에러가 나는 파일 경로 확인

---

## 📞 추가 확인이 필요한 경우

위의 모든 단계를 확인했는데도 문제가 해결되지 않으면:

1. **GitHub Actions 로그 전체 공유**
   - 실패한 단계의 전체 로그
   - 특히 에러 메시지

2. **gh-pages 브랜치 스크린샷**
   - 브랜치의 파일 목록
   - index.html 파일 내용

3. **브라우저 개발자 도구 정보**
   - Network 탭의 실패한 요청
   - Console의 에러 메시지

---

**가장 먼저 확인할 것**: gh-pages 브랜치에 실제로 `index.html` 파일이 있는지 확인하세요!

