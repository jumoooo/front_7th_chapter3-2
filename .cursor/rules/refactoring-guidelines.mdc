# 리팩토링 가이드라인

## 📋 리팩토링 원칙

### 1. 안전한 리팩토링
- 기존 기능 보존 최우선
- 테스트 코드 수정 금지
- 점진적 리팩토링
- 각 단계마다 검증

### 2. 점진적 접근
- 한 번에 하나씩 변경
- 작은 단위로 나누어 진행
- 각 단계 완료 후 테스트
- 롤백 가능한 구조 유지

### 3. 문서화
- 리팩토링 계획 문서화
- 진행 상황 기록
- 변경 사항 상세 기록
- 다음 작업을 위한 참고사항 기록

---

## 🔄 리팩토링 프로세스

### 1. 분석 단계
- 현재 코드 구조 파악
- 문제점 식별
- 개선 방향 수립
- 리팩토링 계획 작성

### 2. 설계 단계
- 목표 구조 설계
- 의존성 관계 파악
- 변경 영향도 분석
- 단계별 계획 수립

### 3. 구현 단계
- 단계별로 구현
- 각 단계 완료 후 검증
- 문서 업데이트
- 테스트 확인

### 4. 검증 단계
- 모든 테스트 통과 확인
- 기능 동작 확인
- 성능 확인
- 코드 리뷰

---

## 🎯 리팩토링 목표

### 기본과제 (Basic)
- Component에서 비즈니스 로직 분리
- Hook으로 로직 이동
- entities -> features -> UI 계층 구조
- 순수 함수와 액션 분리

### 심화과제 (Advanced)
- Zustand로 전역 상태 관리
- Props drilling 제거
- 도메인 props 유지, 불필요한 props 제거
- 결합도 낮추기

---

## 📐 리팩토링 패턴

### 1. Hook 추출
- 비즈니스 로직을 Hook으로 분리
- Entity별 Hook 분리
- UI Hook과 Entity Hook 구분
- 의존성 명확히

### 2. 상태 관리 개선
- 전역 상태와 로컬 상태 구분
- Zustand Store 설계
- Props drilling 제거
- 필요한 props만 전달

### 3. 컴포넌트 분리
- 큰 컴포넌트를 작은 컴포넌트로 분리
- 재사용 가능한 컴포넌트 추출
- 관심사별로 분리
- Props 인터페이스 명확히

---

## ⚠️ 주의사항

### 1. 기능 보존
- 기존 기능 동작 동일하게 유지
- API 변경 시 하위 호환성 유지
- 사용자 경험 변경 없음

### 2. 테스트 우선
- 테스트 코드 수정 금지
- 모든 테스트 통과 필수
- 테스트 실패 시 구현 수정

### 3. 점진적 진행
- 한 번에 너무 많은 변경 금지
- 작은 단위로 나누어 진행
- 각 단계마다 검증

---

## 🔍 리팩토링 체크리스트

리팩토링 전:
- [ ] 현재 코드 구조 파악
- [ ] 문제점 식별
- [ ] 리팩토링 계획 수립
- [ ] 영향도 분석

리팩토링 중:
- [ ] 단계별로 진행
- [ ] 각 단계 완료 후 검증
- [ ] 문서 업데이트
- [ ] 테스트 확인

리팩토링 후:
- [ ] 모든 테스트 통과
- [ ] 기능 정상 동작
- [ ] 코드 품질 개선 확인
- [ ] 문서 최종 업데이트

---

## 📝 리팩토링 문서화

### 필수 기록 사항
- 리팩토링 목표
- 현재 상태 분석
- 변경 계획
- 진행 상황
- 완료 내역
- 문제 해결 과정

### 문서 위치
- `.cursor/mockdowns/` 폴더
- `.md` 파일 형식
- 다음 AI가 참고할 수 있도록 상세히 작성
